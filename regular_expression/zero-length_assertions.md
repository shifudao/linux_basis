# 零宽断言(Zero-Length Assertions)

零宽断言是一种特殊的正则匹配，本身表达式不匹配任何字符(零个字符，所以称为零宽)，而是满足某种条件
(称为断言)。事实上，前面我们已经见过的``^``,``$``,``\b``等等就属于零宽断言的范畴。回忆一下，
这几个正则字符代表什么含义？

断言用来声明一个应该为真的事实。正则表达式中只有当断言为真时才会继续进行匹配。

> ``BRE``,``ERE``正则引擎均不支持**零宽断言**

零宽断言有几种类型:

## 先行断言
也叫**零宽度正预测先行断言**(?=表达式),表示匹配表达式前面的位置

例如 [a-z]\*(?=ing) 可以匹配cooking singing 中的cook与sing

注意：先行断言的执行步骤是这样的,先从要匹配的字符串中的最右端找到第一个ing
(也就是先行断言中的表达式)然后 再匹配其前面的表达式，若无法匹配则继续查找第二个ing,
再匹配第二个ing前面的字符串，若能匹配，则匹配

例如：``.*(?=ing)`` 可以匹配cooking singing 中的cook,sing，对于cook sing无法匹配到

## 后发断言
也叫**零宽度正回顾后发断言**(?<=表达式)，表示匹配表达式后面的位置。

例如``(?<=abc).*``可以匹配abcdefg中的defg

注意：后发断言跟先行断言恰恰相反 它的执行步骤是这样的：
先从要匹配的字符串中的最左端找到第一个abc(也就是先行断言中的表达式),
然后再匹配其后面的表达式，若无法匹配则继续查找第二个abc, 再匹配第二个abc后面的字符串，
若能匹配,则匹配

例如(?<=abc).* 可以匹配abcdefgabc中的defgabc 而不是abcdefg

先行断言和后发断言可以结合使用:

    curl -s http://www.nipic.com/index.html | grep -oP '(?<=<img src=").+?(?=")'

## 负向零宽断言
负向零宽断言 ``(?!表达式)`` 也是匹配一个零宽度的位置，不过这个位置的“断言”取表达式的反值，
例如 ``(?!表达式)`` 表示 表达式 前面的位置，如果 表达式 不成立 ，匹配这个位置；如果 表达式 成立，则不匹配：同样，负向零宽断言也有“先行”和“后发”两种，负向零宽后发断言为 (?<!表达式)

负向零宽断言的详解和范例参考:
 [正则表达式30分钟入门教程#负向零宽断言](http://deerchao.net/tutorials/regex/regex.htm#negativelookaround)

> **TIPS**: grep中使用零宽断言时，表达式必须使用fix pattern。如``(?=.*abc)``会报错

> 给长整数用逗号分隔(每3位)的正则范例: http://stackoverflow.com/questions/721304/insert-commas-into-number-string
